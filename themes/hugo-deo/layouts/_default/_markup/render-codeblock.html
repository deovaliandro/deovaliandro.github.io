{{ $lang := .Type | default "text" }}
{{ $highlighted := transform.HighlightCodeBlock . }}

<figure class="h-cb">
    <figcaption class="h-cb-lang h-cb-lang-{{ $lang }}">
        {{- with $lang -}}
            {{ lower . }}
        {{- end -}}
    </figcaption>
    <div class="h-cb-ct">
        {{ $highlighted.Wrapped }}
    </div>
</figure>